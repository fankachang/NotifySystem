@page
@{
    ViewData["Title"] = "é¦–é ";
}

<div class="gradient-bg min-h-screen flex items-center justify-center" style="margin-top: -2rem; margin-bottom: -2rem; min-height: calc(100vh - 64px - 80px);">
    <div class="text-center text-white px-4">
        <h1 class="text-5xl font-bold mb-6">ğŸ“¢ Line é€šçŸ¥æœå‹™</h1>
        <p class="text-xl mb-8 opacity-90">
            æ•´åˆ Nagios ç›£æ§å‘Šè­¦èˆ‡ Line æ¨æ’­é€šçŸ¥<br/>
            è®“æ‚¨å³æ™‚æŒæ¡ç³»çµ±ç‹€æ…‹
        </p>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/Login" 
               class="px-8 py-4 bg-white text-purple-700 rounded-lg font-semibold hover:bg-gray-100 transition shadow-lg">
                ä½¿ç”¨ Line ç™»å…¥
            </a>
            <a href="/Admin/Login" 
               class="px-8 py-4 bg-transparent border-2 border-white text-white rounded-lg font-semibold hover:bg-white hover:text-purple-700 transition">
                ç®¡ç†å“¡å…¥å£
            </a>
        </div>

        <div class="mt-16 grid md:grid-cols-3 gap-8 max-w-4xl mx-auto">
            <div class="bg-white bg-opacity-10 rounded-xl p-6 backdrop-blur-sm">
                <div class="text-4xl mb-4">ğŸ””</div>
                <h3 class="font-semibold text-lg mb-2">å³æ™‚å‘Šè­¦é€šçŸ¥</h3>
                <p class="text-sm opacity-80">æ•´åˆ Nagios ç›£æ§ç³»çµ±ï¼Œç¬¬ä¸€æ™‚é–“æ”¶åˆ°å‘Šè­¦æ¨æ’­</p>
            </div>
            <div class="bg-white bg-opacity-10 rounded-xl p-6 backdrop-blur-sm">
                <div class="text-4xl mb-4">ğŸ‘¥</div>
                <h3 class="font-semibold text-lg mb-2">ç¾¤çµ„åŒ–ç®¡ç†</h3>
                <p class="text-sm opacity-80">ä¾åœ˜éšŠã€æœå‹™åˆ†é¡ï¼Œç²¾æº–ç™¼é€å‘Šè­¦çµ¦å°æ‡‰äººå“¡</p>
            </div>
            <div class="bg-white bg-opacity-10 rounded-xl p-6 backdrop-blur-sm">
                <div class="text-4xl mb-4">ğŸ“Š</div>
                <h3 class="font-semibold text-lg mb-2">å®Œæ•´è¿½è¹¤è¨˜éŒ„</h3>
                <p class="text-sm opacity-80">è¨Šæ¯ç™¼é€æ­·å²ã€çµ±è¨ˆå ±è¡¨ï¼Œå®Œæ•´æŒæ¡å‘Šè­¦ç‹€æ³</p>
            </div>
        </div>
    </div>
</div>

<script>
// å¾ Cookie è®€å–å€¼çš„è¼”åŠ©å‡½æ•¸
function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) return parts.pop().split(';').shift();
    return null;
}

// åˆªé™¤ Cookie çš„è¼”åŠ©å‡½æ•¸
function deleteCookie(name) {
    document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
}

// å¦‚æœå·²ç™»å…¥ï¼Œç›´æ¥è·³è½‰åˆ°å„€è¡¨æ¿
document.addEventListener('DOMContentLoaded', function() {
    // å„ªå…ˆå¾ Cookie è®€å– token
    let token = getCookie('auth_token');
    
    if (token) {
        localStorage.setItem('token', token);
        deleteCookie('auth_token');
        
        // è™•ç† user_info Cookie
        const userInfoStr = getCookie('user_info');
        if (userInfoStr) {
            try {
                const userInfo = JSON.parse(decodeURIComponent(userInfoStr));
                localStorage.setItem('user', JSON.stringify(userInfo));
                deleteCookie('user_info');
            } catch (e) {
                console.error('è§£æ user_info Cookie å¤±æ•—', e);
            }
        }
        window.location.href = '/Dashboard';
        return;
    }
    
    token = localStorage.getItem('token');
    if (token) {
        window.location.href = '/Dashboard';
    }
});
</script>
